<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="stylesheet" type="text/css" href="/style-plain.css"/><link rel="icon" href="/favicon.png"/><title>Rendering a bezier surface</title></head><body><div class="container"><div class="text-block"><a href="/default.html">home</a></div><div class="header">Rendering a bezier surface</div><p>Previously I wrote a blog post about how to interpolate a bezier curve. A bezier curve helps us to create smooth lines, surfaces, type faces. A bezier surface is set of bezier curves that is used for imaging a part of something. Before rendering a bezier surface, I will mention about how to render something with Python programming language. I will demonstrate it by rendering a set of cubes, then I will create marbles that made of cubes. A marble will stay at position of an interpolated point of a bezier curve. I will create an optimized cube for making the drawing process easier.</p><p> </p><pre><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">create_cube</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_horizontal</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_vertical</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="comment"># only up to horizontally 90 degrees implemented in this example</span><span class="whitespace">
  </span><span class="reserved">if</span><span class="whitespace"> </span><span class="identifier">rotate_vertical</span><span class="whitespace"> </span><span class="operator">&gt;</span><span class="whitespace"> </span><span class="number">0</span><span class="whitespace"> </span><span class="reserved">and</span><span class="whitespace"> </span><span class="identifier">rotate_vertical</span><span class="whitespace"> </span><span class="operator">&lt;</span><span class="whitespace"> </span><span class="number">90</span><span class="whitespace"> </span><span class="reserved">and</span><span class="whitespace"> </span><span class="identifier">rotate_horizontal</span><span class="whitespace"> </span><span class="operator">&lt;</span><span class="whitespace"> </span><span class="number">90</span><span class="whitespace"> </span><span class="reserved">and</span><span class="whitespace"> </span><span class="identifier">rotate_horizontal</span><span class="whitespace"> </span><span class="operator">&gt;</span><span class="whitespace"> </span><span class="number">0</span><span class="colon">:</span><span class="whitespace">
    </span><span class="reserved">return</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="whitespace">
      </span><span class="bracked_begin">[</span><span class="whitespace">
        </span><span class="number">20</span><span class="comma">,</span><span class="whitespace"> </span><span class="comment"># this is in percent</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="whitespace">
      </span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
      </span><span class="bracked_begin">[</span><span class="whitespace">
        </span><span class="number">5</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="whitespace">
      </span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
      </span><span class="bracked_begin">[</span><span class="whitespace">
        </span><span class="number">30</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
        </span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">-</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">+</span><span class="number">0</span><span class="dot">.</span><span class="number">5</span><span class="bracket_end">]</span><span class="whitespace">
      </span><span class="bracket_end">]</span><span class="whitespace">
    </span><span class="bracket_end">]</span><span class="whitespace">
</span></pre><p> </p><p>The function returns diamond shapes. Set of diamond shapes, ordered in correct way, will be painted to an image file in Python or to a canvas on a browser. Vertically minus degrees are facing upwards. The visible faces must be set in correct order. It is possible to do that by ordering faces by their average z-index, but I prefer not to complicate that process further. Z-sort will be used for sorting the cubes.</p><p> </p><pre><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">math</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">rotate</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">deg</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">cos</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">math</span><span class="dot">.</span><span class="identifier">cos</span><span class="paran_begin">(</span><span class="identifier">math</span><span class="dot">.</span><span class="identifier">radians</span><span class="paran_begin">(</span><span class="identifier">deg</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">sin</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">math</span><span class="dot">.</span><span class="identifier">sin</span><span class="paran_begin">(</span><span class="identifier">math</span><span class="dot">.</span><span class="identifier">radians</span><span class="paran_begin">(</span><span class="identifier">deg</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="identifier">cos</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">x</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">sin</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">cos</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">y</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">sin</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">x</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">rotate_xyz</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rh</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rv</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">xn</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zn</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">rotate</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rh</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">yn</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zn</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">rotate</span><span class="paran_begin">(</span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zn</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rv</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="identifier">xn</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">yn</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zn</span><span class="bracket_end">]</span><span class="whitespace">
</span></pre><p> </p><p>A rotate function that rotates x-z horizontally, then y-z in vertical axis will be needed.</p><p> </p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">rotate</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">rotate_xyz</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">xyz_on_canvas</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">w</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">h</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rh</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rv</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">include_z</span><span class="operator">=</span><span class="reserved-identifier">False</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">xn</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">yn</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zn</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">rotate_xyz</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rh</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rv</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">x_on_canvas</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">w</span><span class="operator">/</span><span class="number">2</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">xn</span><span class="whitespace">
  </span><span class="identifier">y_on_canvas</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">h</span><span class="operator">/</span><span class="number">2</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">yn</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="operator">-</span><span class="number">1</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">if</span><span class="whitespace"> </span><span class="identifier">include_z</span><span class="colon">:</span><span class="whitespace">
    </span><span class="reserved">return</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">x_on_canvas</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y_on_canvas</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zn</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">x_on_canvas</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y_on_canvas</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p> </p><p>A point in three-d should be rotated first. The values x-y will be the position on canvas. On canvas, the when the y is getting higher, it means it is being drawn to the end of canvas in vertical. So the height should be inreversed. I also scale them with a multipier in order to see the cube's borders. At the end, the scale may be minimized as less as possible. So the cubes won't be visible in result.</p><p> </p><pre><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">darken</span><span class="paran_begin">(</span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">percent</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">rblacks</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">r</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">percent</span><span class="operator">/</span><span class="number">100</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">gblacks</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">g</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">percent</span><span class="operator">/</span><span class="number">100</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">bblacks</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">percent</span><span class="operator">/</span><span class="number">100</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">r</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">rblacks</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">gblacks</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">bblacks</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p> </p><p>A darken function like above will be needed in order to make a cube's faces visually differentiable.</p><p> </p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace">

</span><span class="identifier">render</span><span class="paran_begin">(</span><span class="whitespace">
  </span><span class="string">"render-1"</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="whitespace">
    </span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="bracket_end">]</span><span class="whitespace">
  </span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">4</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">4</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">1024</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">40</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">20</span><span class="comma">,</span><span class="whitespace">
</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p> </p><p>I am using Python's PIL library for drawing in two-d. The render will be looking like below when we run it.</p><p> </p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">create_cube</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">create_cube</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">xyz_on_canvas</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">xyz_on_canvas</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">darken</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">darken</span><span class="whitespace">
 
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">PIL</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">Image</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">ImageDraw</span><span class="whitespace">
 
</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">render</span><span class="paran_begin">(</span><span class="identifier">name</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">cubes</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">width</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">height</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_horizontal</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_vertical</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">save</span><span class="operator">=</span><span class="reserved-identifier">True</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">width</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="whitespace">
  </span><span class="identifier">height</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="whitespace">
  </span><span class="identifier">image</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">Image</span><span class="dot">.</span><span class="identifier">new</span><span class="paran_begin">(</span><span class="string">"RGB"</span><span class="comma">,</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">width</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">height</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">draw</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">ImageDraw</span><span class="dot">.</span><span class="identifier">Draw</span><span class="paran_begin">(</span><span class="identifier">image</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">cubes</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">cube</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">create_cube</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_horizontal</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_vertical</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">darken_percent</span><span class="comma">,</span><span class="whitespace"> </span><span class="operator">*</span><span class="identifier">diamond</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">cube</span><span class="colon">:</span><span class="whitespace">
      </span><span class="identifier">points</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">
      </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">xx</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">yy</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zz</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">diamond</span><span class="colon">:</span><span class="whitespace">
        </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">xyz_on_canvas</span><span class="paran_begin">(</span><span class="identifier">xx</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">yy</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">zz</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">unit_scale</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">width</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">height</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_horizontal</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rotate_vertical</span><span class="paran_end">)</span><span class="whitespace">
        </span><span class="identifier">points</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
      </span><span class="identifier">draw</span><span class="dot">.</span><span class="identifier">polygon</span><span class="paran_begin">(</span><span class="identifier">points</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">darken</span><span class="paran_begin">(</span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">darken_percent</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">if</span><span class="whitespace"> </span><span class="identifier">save</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">image</span><span class="dot">.</span><span class="identifier">save</span><span class="paran_begin">(</span><span class="identifier">open</span><span class="paran_begin">(</span><span class="string">"{}.png"</span><span class="dot">.</span><span class="identifier">format</span><span class="paran_begin">(</span><span class="identifier">name</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="string">"wb"</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="string">"PNG"</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="identifier">image</span><span class="whitespace">
</span></pre><p> </p><p>The unit of width and height will be cubes.</p><p></p><div class="image-block"><img width="512" height="512" alt="/examples/render-1.png" src="/examples/render-1.png"/></div><p> </p><p>Unit scale is too much for demonstration purpuse. It will be very less when using the cubes to create something that looks like not made of cubes. A bezier surface will be rendered with balls that mades of cubes.</p><p> </p><pre><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="paran_begin">(</span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">origin_x</span><span class="operator">=</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">origin_y</span><span class="operator">=</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">origin_z</span><span class="operator">=</span><span class="number">0</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">ball</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="operator">-</span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
    </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">y</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="operator">-</span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
      </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="operator">-</span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
        </span><span class="reserved">if</span><span class="whitespace"> </span><span class="identifier">x</span><span class="operator">*</span><span class="operator">*</span><span class="number">2</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">y</span><span class="operator">*</span><span class="operator">*</span><span class="number">2</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">z</span><span class="operator">*</span><span class="operator">*</span><span class="number">2</span><span class="whitespace"> </span><span class="operator">&lt;</span><span class="whitespace"> </span><span class="identifier">r</span><span class="operator">*</span><span class="operator">*</span><span class="number">2</span><span class="colon">:</span><span class="whitespace">
          </span><span class="identifier">ball</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">origin_x</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">origin_y</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">origin_z</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">z</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="identifier">ball</span><span class="whitespace">
</span></pre><p> </p><p>It is easy to create a ball when we think a ball's radius is it's distance to the origin in a three-d space. The ball will be created in that way, starting at 0, 0, 0 origin.</p><p> </p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">ball</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="whitespace">

</span><span class="identifier">cubes</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="paran_begin">(</span><span class="number">128</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
 </span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">render</span><span class="paran_begin">(</span><span class="whitespace">
  </span><span class="string">"render-2-1"</span><span class="comma">,</span><span class="whitespace">
  </span><span class="identifier">cubes</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">1024</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">1024</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">4</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">40</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">20</span><span class="comma">,</span><span class="whitespace">
</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p> </p><p>The result will be this.</p><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/render-2.png" src="/examples/render-2.png"/></div><p> </p><p>A bezier surface is made of four bezier curves. Lets try to render a single bezier curve and complete the render process first.</p><p> </p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">ball</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="whitespace">

</span><span class="identifier">cubes</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="identifier">curve</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">60</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="operator">-</span><span class="number">80</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="operator">-</span><span class="number">80</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">60</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="number">60</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">60</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="identifier">balls</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">200</span><span class="whitespace">
</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">i</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">balls</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">px</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">i</span><span class="operator">/</span><span class="identifier">balls</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="paran_begin">(</span><span class="number">10</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">px</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">zsort</span><span class="paran_begin">(</span><span class="identifier">cube</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">cube</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">x</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">sort</span><span class="paran_begin">(</span><span class="identifier">key</span><span class="operator">=</span><span class="identifier">zsort</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">render</span><span class="paran_begin">(</span><span class="whitespace">
  </span><span class="string">"render-3"</span><span class="comma">,</span><span class="whitespace">
  </span><span class="identifier">cubes</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">512</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">512</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">4</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">40</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">20</span><span class="comma">,</span><span class="whitespace">
</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p> </p><p>Cubes are sorted in their rendering order after the bezier interpolation.</p><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/render-3.png" src="/examples/render-3.png"/></div><p></p><p>Each interpolated point in four bezier curves, will be used for creating another curve. So in that way it will be possible shape a solid surface. A surface in this example has four curves and two properties, wide and fall. Wide is the one is longing, and fall is a curve that created by longing interpolated points.</p><p> </p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">ball</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="whitespace">

</span><span class="identifier">cubes</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="identifier">surface</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">4</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">4</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">6</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">6</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="whitespace">
</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="identifier">scale_surface</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">4</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="colon">:</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">p</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">

</span><span class="identifier">wide</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">40</span><span class="whitespace">
</span><span class="identifier">fall</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">40</span><span class="whitespace">
</span><span class="identifier">ball_size</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">4</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">w</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wide</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">wa</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wc</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wd</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">f</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">fall</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">px</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="paran_begin">(</span><span class="identifier">ball_size</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
      </span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">px</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">zsort</span><span class="paran_begin">(</span><span class="identifier">cube</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">cube</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">x</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">sort</span><span class="paran_begin">(</span><span class="identifier">key</span><span class="operator">=</span><span class="identifier">zsort</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">render</span><span class="paran_begin">(</span><span class="whitespace">
  </span><span class="string">"render-4-3"</span><span class="comma">,</span><span class="whitespace">
  </span><span class="identifier">cubes</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">1024</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">1024</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">4</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">40</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">20</span><span class="comma">,</span><span class="whitespace">
</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p> </p><p>The result is looking like this.</p><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/render-4-3.png" src="/examples/render-4-3.png"/></div><p></p><p>Keeping the wide and tall parameters less, drawing lines between sparse points with their segments calculated by their distance may give better results. Lets try that.</p><p> </p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">ball</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">ax</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">ay</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">az</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">a</span><span class="whitespace">
  </span><span class="identifier">bx</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">by</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace">
  </span><span class="identifier">dx</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">ax</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bx</span><span class="paran_end">)</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">min</span><span class="paran_begin">(</span><span class="identifier">ax</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bx</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">dy</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">ay</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">by</span><span class="paran_end">)</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">min</span><span class="paran_begin">(</span><span class="identifier">ay</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">by</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">dz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">az</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bz</span><span class="paran_end">)</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">min</span><span class="paran_begin">(</span><span class="identifier">az</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bz</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="comment"># the longest distance of axises will be used for interpolating the line</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">dx</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">dy</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">dz</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">cubes</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="identifier">surface</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">4</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">4</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">6</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">6</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="whitespace">
</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="identifier">scale_surface</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">4</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="colon">:</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">p</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">

</span><span class="identifier">wide</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">4</span><span class="whitespace">
</span><span class="identifier">fall</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">4</span><span class="whitespace">
</span><span class="identifier">ball_size</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">4</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">w</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wide</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">wa</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wc</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wd</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wa_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wb_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wc_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wd_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">f</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">fall</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">px</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="paran_begin">(</span><span class="identifier">ball_size</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
      </span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">px</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">a</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd_next</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">c</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd_next</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">d</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd</span><span class="paran_end">)</span><span class="whitespace">

    </span><span class="identifier">segments_wide</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">a</span><span class="comma">,</span><span class="identifier">b</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">i</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">segments_wide</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
      </span><span class="identifier">linea</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="paran_begin">(</span><span class="identifier">i</span><span class="operator">/</span><span class="identifier">segments_wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="paran_end">)</span><span class="whitespace">
      </span><span class="identifier">lineb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="paran_begin">(</span><span class="identifier">i</span><span class="operator">/</span><span class="identifier">segments_wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="paran_end">)</span><span class="whitespace">
      </span><span class="identifier">segments_line</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">linea</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">lineb</span><span class="paran_end">)</span><span class="whitespace">
      </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">j</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">segments_line</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
        </span><span class="identifier">px</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="paran_begin">(</span><span class="identifier">j</span><span class="operator">/</span><span class="identifier">segments_line</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">linea</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">lineb</span><span class="paran_end">)</span><span class="whitespace">
        </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="paran_begin">(</span><span class="identifier">ball_size</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
          </span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">px</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">zsort</span><span class="paran_begin">(</span><span class="identifier">cube</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">cube</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">x</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">sort</span><span class="paran_begin">(</span><span class="identifier">key</span><span class="operator">=</span><span class="identifier">zsort</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">render</span><span class="paran_begin">(</span><span class="whitespace">
  </span><span class="string">"render-5"</span><span class="comma">,</span><span class="whitespace">
  </span><span class="identifier">cubes</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">1024</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">1024</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">4</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">40</span><span class="comma">,</span><span class="whitespace">
  </span><span class="number">20</span><span class="comma">,</span><span class="whitespace">
</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p></p><p>Next step, instead of showing the faces with balls made of cubes, finding the shaded color of a face by calculating the average of rendered cubes that stays in the area of it. It works well, plus it is possible to scale or see them in different angles without a need to build and render again. It may be possible to find shading of a face, without need to render them with cubes first, but I am afraid of doing that math. This is a painter's way to draw something on canvas, I prefer this way of rendering. Math stuff is not easy as it is written on black-white blackboard, and most likely the result is going to be disappointment.</p><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/render-6.png" src="/examples/render-6.png"/></div><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/render-6-1.png" src="/examples/render-6-1.png"/></div><p></p><pre><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">render</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">ball</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="whitespace">
</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">xyz_on_canvas</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">xyz_on_canvas</span><span class="whitespace">

</span><span class="reserved">from</span><span class="whitespace"> </span><span class="identifier">PIL</span><span class="whitespace"> </span><span class="reserved">import</span><span class="whitespace"> </span><span class="identifier">Image</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">ImageDraw</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">ax</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">ay</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">az</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">a</span><span class="whitespace">
  </span><span class="identifier">bx</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">by</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace">
  </span><span class="identifier">dx</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">ax</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bx</span><span class="paran_end">)</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">min</span><span class="paran_begin">(</span><span class="identifier">ax</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bx</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">dy</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">ay</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">by</span><span class="paran_end">)</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">min</span><span class="paran_begin">(</span><span class="identifier">ay</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">by</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">dz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">az</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bz</span><span class="paran_end">)</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">min</span><span class="paran_begin">(</span><span class="identifier">az</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">bz</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">dx</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">dy</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">dz</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">WIDTH</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">1024</span><span class="whitespace">
</span><span class="identifier">HEIGHT</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">1024</span><span class="whitespace">
</span><span class="identifier">UNIT_SCALE</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">2</span><span class="whitespace">
</span><span class="identifier">ROTATE_H</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">40</span><span class="whitespace">
</span><span class="identifier">ROTATE_V</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">20</span><span class="whitespace">

</span><span class="identifier">surface</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">4</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">4</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">6</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">6</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace">
  </span><span class="bracked_begin">[</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="operator">-</span><span class="number">16</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">16</span><span class="bracket_end">]</span><span class="comma">,</span><span class="bracked_begin">[</span><span class="number">0</span><span class="comma">,</span><span class="operator">-</span><span class="number">40</span><span class="comma">,</span><span class="number">40</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="whitespace">
</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="identifier">scale_surface</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">4</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="colon">:</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">p</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">curve</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">
    </span><span class="identifier">p</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">*</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scale_surface</span><span class="whitespace">

</span><span class="identifier">wide</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">10</span><span class="whitespace">
</span><span class="identifier">fall</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">10</span><span class="whitespace">
</span><span class="identifier">ball_size</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">2</span><span class="whitespace">
</span><span class="identifier">faces</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">w</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wide</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">wa</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wc</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wd</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wa_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wb_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wc_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">wd_next</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">w</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">surface</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="bracked_begin">[</span><span class="number">3</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">f</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">fall</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">a</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd_next</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">c</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc_next</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd_next</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">d</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">bezier</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">f</span><span class="operator">+</span><span class="number">1</span><span class="paran_end">)</span><span class="operator">/</span><span class="identifier">fall</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wa</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wb</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wc</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">wd</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">faces</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">zsort</span><span class="paran_begin">(</span><span class="identifier">cube</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">r</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">g</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">cube</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">x</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">faces_rendered</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="operator">*</span><span class="identifier">rgb</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">faces</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">cubes</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">
  </span><span class="identifier">segments_wide</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">max</span><span class="paran_begin">(</span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">a</span><span class="comma">,</span><span class="identifier">b</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">i</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">segments_wide</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">linea</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="paran_begin">(</span><span class="identifier">i</span><span class="operator">/</span><span class="identifier">segments_wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">lineb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="paran_begin">(</span><span class="identifier">i</span><span class="operator">/</span><span class="identifier">segments_wide</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="identifier">segments_line</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">distance</span><span class="paran_begin">(</span><span class="identifier">linea</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">lineb</span><span class="paran_end">)</span><span class="whitespace">
    </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">j</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="number">0</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">segments_line</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
      </span><span class="identifier">px</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">lerp</span><span class="paran_begin">(</span><span class="identifier">j</span><span class="operator">/</span><span class="identifier">segments_line</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">linea</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">lineb</span><span class="paran_end">)</span><span class="whitespace">
      </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">create_ball</span><span class="paran_begin">(</span><span class="identifier">ball_size</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
        </span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">px</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">py</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">pz</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="operator">*</span><span class="identifier">rgb</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">cubes</span><span class="dot">.</span><span class="identifier">sort</span><span class="paran_begin">(</span><span class="identifier">key</span><span class="operator">=</span><span class="identifier">zsort</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">img</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">render</span><span class="paran_begin">(</span><span class="whitespace">
    </span><span class="string">"face"</span><span class="comma">,</span><span class="whitespace">
    </span><span class="identifier">cubes</span><span class="comma">,</span><span class="whitespace">
    </span><span class="identifier">WIDTH</span><span class="comma">,</span><span class="whitespace">
    </span><span class="identifier">HEIGHT</span><span class="comma">,</span><span class="whitespace">
    </span><span class="identifier">UNIT_SCALE</span><span class="comma">,</span><span class="whitespace">
    </span><span class="identifier">ROTATE_H</span><span class="comma">,</span><span class="whitespace">
    </span><span class="identifier">ROTATE_V</span><span class="comma">,</span><span class="whitespace">
    </span><span class="reserved-identifier">False</span><span class="whitespace">
  </span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">widthimg</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">heightimg</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">img</span><span class="dot">.</span><span class="identifier">size</span><span class="whitespace">
  </span><span class="identifier">pixels</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">img</span><span class="dot">.</span><span class="identifier">load</span><span class="paran_begin">(</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">shade_len</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">0</span><span class="whitespace">
  </span><span class="identifier">sum_r</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">0</span><span class="whitespace">
  </span><span class="identifier">sum_g</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">0</span><span class="whitespace">
  </span><span class="identifier">sum_b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">0</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="identifier">widthimg</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
    </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">y</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">range</span><span class="paran_begin">(</span><span class="identifier">heightimg</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
      </span><span class="identifier">rgb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">pixels</span><span class="bracked_begin">[</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="bracket_end">]</span><span class="whitespace">
      </span><span class="reserved">if</span><span class="whitespace"> </span><span class="reserved">not</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">rgb</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="number">255</span><span class="whitespace"> </span><span class="reserved">and</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="number">255</span><span class="whitespace"> </span><span class="reserved">and</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="number">255</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
        </span><span class="comment"># white is the background color</span><span class="whitespace">
        </span><span class="identifier">sum_r</span><span class="whitespace"> </span><span class="operator">+</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="bracked_begin">[</span><span class="number">0</span><span class="bracket_end">]</span><span class="whitespace">
        </span><span class="identifier">sum_g</span><span class="whitespace"> </span><span class="operator">+</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="bracked_begin">[</span><span class="number">1</span><span class="bracket_end">]</span><span class="whitespace">
        </span><span class="identifier">sum_b</span><span class="whitespace"> </span><span class="operator">+</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="bracked_begin">[</span><span class="number">2</span><span class="bracket_end">]</span><span class="whitespace">
        </span><span class="identifier">shade_len</span><span class="whitespace"> </span><span class="operator">+</span><span class="operator">=</span><span class="whitespace"> </span><span class="number">1</span><span class="whitespace">
  </span><span class="identifier">avg_r</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">sum_r</span><span class="whitespace"> </span><span class="operator">/</span><span class="whitespace"> </span><span class="identifier">shade_len</span><span class="whitespace">
  </span><span class="identifier">avg_g</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">sum_g</span><span class="whitespace"> </span><span class="operator">/</span><span class="whitespace"> </span><span class="identifier">shade_len</span><span class="whitespace">
  </span><span class="identifier">avg_b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">sum_b</span><span class="whitespace"> </span><span class="operator">/</span><span class="whitespace"> </span><span class="identifier">shade_len</span><span class="whitespace">
  </span><span class="identifier">faces_rendered</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">avg_r</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">avg_g</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">int</span><span class="paran_begin">(</span><span class="identifier">avg_b</span><span class="paran_end">)</span><span class="bracket_end">]</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">name</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="string">"render-6-1"</span><span class="whitespace">
</span><span class="identifier">width</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">WIDTH</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">UNIT_SCALE</span><span class="whitespace">
</span><span class="identifier">height</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">HEIGHT</span><span class="whitespace"> </span><span class="operator">*</span><span class="whitespace"> </span><span class="identifier">UNIT_SCALE</span><span class="whitespace">
</span><span class="identifier">image</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">Image</span><span class="dot">.</span><span class="identifier">new</span><span class="paran_begin">(</span><span class="string">"RGB"</span><span class="comma">,</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="identifier">width</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">height</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="paran_begin">(</span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="comma">,</span><span class="whitespace"> </span><span class="number">255</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
</span><span class="identifier">draw</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">ImageDraw</span><span class="dot">.</span><span class="identifier">Draw</span><span class="paran_begin">(</span><span class="identifier">image</span><span class="paran_end">)</span><span class="whitespace">
</span><span class="identifier">faces_on_canvas</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">

</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">d</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">faces_rendered</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">points</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="identifier">a</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">b</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">c</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">d</span><span class="bracket_end">]</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">points</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="identifier">xyz_on_canvas</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">UNIT_SCALE</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">width</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">height</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">ROTATE_H</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">ROTATE_V</span><span class="comma">,</span><span class="whitespace"> </span><span class="reserved-identifier">True</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">faces_on_canvas</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="bracked_begin">[</span><span class="identifier">points</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="bracket_end">]</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="reserved">def</span><span class="whitespace"> </span><span class="identifier">centerz_sort</span><span class="paran_begin">(</span><span class="identifier">face</span><span class="paran_end">)</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">points</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">face</span><span class="whitespace">
  </span><span class="identifier">sumz</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="number">0</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">points</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">z</span><span class="whitespace"> </span><span class="operator">+</span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">sumz</span><span class="whitespace">
  </span><span class="reserved">return</span><span class="whitespace"> </span><span class="identifier">sumz</span><span class="whitespace"> </span><span class="operator">/</span><span class="whitespace"> </span><span class="identifier">len</span><span class="paran_begin">(</span><span class="identifier">points</span><span class="paran_end">)</span><span class="whitespace">
</span><span class="identifier">faces_on_canvas</span><span class="dot">.</span><span class="identifier">sort</span><span class="paran_begin">(</span><span class="identifier">key</span><span class="operator">=</span><span class="identifier">centerz_sort</span><span class="paran_end">)</span><span class="whitespace">
</span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">face</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">faces_on_canvas</span><span class="colon">:</span><span class="whitespace">
  </span><span class="identifier">points</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">rgb</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">face</span><span class="whitespace">
  </span><span class="identifier">points_wo_z</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="bracked_begin">[</span><span class="bracket_end">]</span><span class="whitespace">
  </span><span class="reserved">for</span><span class="whitespace"> </span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">z</span><span class="whitespace"> </span><span class="reserved">in</span><span class="whitespace"> </span><span class="identifier">points</span><span class="colon">:</span><span class="whitespace">
    </span><span class="identifier">points_wo_z</span><span class="dot">.</span><span class="identifier">append</span><span class="paran_begin">(</span><span class="paran_begin">(</span><span class="identifier">x</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">y</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">
  </span><span class="identifier">draw</span><span class="dot">.</span><span class="identifier">polygon</span><span class="paran_begin">(</span><span class="identifier">points_wo_z</span><span class="comma">,</span><span class="whitespace"> </span><span class="identifier">tuple</span><span class="paran_begin">(</span><span class="identifier">rgb</span><span class="paran_end">)</span><span class="paran_end">)</span><span class="whitespace">

</span><span class="identifier">image</span><span class="dot">.</span><span class="identifier">save</span><span class="paran_begin">(</span><span class="identifier">open</span><span class="paran_begin">(</span><span class="string">"{}.png"</span><span class="dot">.</span><span class="identifier">format</span><span class="paran_begin">(</span><span class="identifier">name</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="string">"wb"</span><span class="paran_end">)</span><span class="comma">,</span><span class="whitespace"> </span><span class="string">"PNG"</span><span class="paran_end">)</span><span class="whitespace">
</span></pre><p> </p><p>The render part is written in Python language. I edit the surfaces by an application that runs on a browser written with javascript when I am creating something. Here are some examples that I rendered in this way.</p><p> </p><p>These are the examples with only cubes.</p><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/balconykarmelicka.png" src="/examples/balconykarmelicka.png"/></div><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/sink.png" src="/examples/sink.png"/></div><p> </p><p>This is rendered with faces that painted by cubes.</p><p> </p><div class="image-block"><img width="512" height="512" alt="/examples/potato.png" src="/examples/potato.png"/></div><p> </p><p>Good luck playing with that.</p><div class="footer"><a href="https://linkedin.com/in/fatih-erikli-2a8315337">linkedin.com/in/fatih-erikli-2a8315337</a></div></div></body></html>